<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TrybeTrip Form</title>
    <link rel="stylesheet" href="style_form.css">
</head>
<body>
    <header>
        <h1>Formulário TrybeTryp</h1>
    </header>
    <main>
        <section>
            <p id="instructions"><em>Preencha o formulário completo para concorrer ao concurso TrybeTrip, que premiará o vencedor com uma viagem totalmente paga.</em></p>
        </section>

        <section>
            <form action="" method="post">
                <div id="form-container">
                    <div class="form-line">
                        <label for="name">Nome Completo:</label>
                        <input type="text" id="name" name="name" autofocus required class="line-content">
                    </div>
                    <div class="form-line">
                        <label for="email">E-mail:</label>
                        <input type="email" name="email" id="email" required class="line-content">
                    </div>
                    <div class="form-line">
                        <fieldset class="line-content">
                            <legend>Destino Preferido:</legend>
                            <label for="trip1" class="radio-item"><input type="radio" name="trip-option" id="trip1" value="cidade"> Cidade</label>
                            <label for="trip2" class="radio-item"><input type="radio" name="trip-option" id="trip2" value="campo"> Campo</label>
                            <label for="trip3" class="radio-item"><input type="radio" name="trip-option" id="trip3" value="praia"> Praia</label>
                            <label for="trip4" class="radio-item"><input type="radio" name="trip-option" id="trip4" value="montanha"> Montanha</label>
                        </fieldset>
                    </div>
                    <div class="form-line" id="label-question">
                        <label for="question">Por que você deveria ser a pessoa desenvolvedora a ganhar o concurso TrybeTrip?</label>
                        <textarea name="question" id="question" rows="5" required class="line-content" placeholder="Escreva aqui sua resposta em até 500 caracteres."></textarea>
                    </div>
                    <div class="form-line">
                        <label for="date">Qual a melhor data para realizar sua viagem?</label><br>
                        <input type="date" name="date" id="date" required class="line-content">
                    </div>
                    <div class="form-line">
                        <label for="agreement1"><input type="checkbox" name="receive-opportunities" id="agreement1" value="agree-to-receive"> Gostaria de receber outras incríveis oportunidades oferecidas pela Trybe?</label>
                    </div>
                    <div class="form-line">
                        <label for="agreement2"><input type="checkbox" name="image-sharing" id="agreement2" value="agree-to-share"> Concordo que imagens das minhas férias poderão ser usadas na divulgação de concursos futuros.</label>
                    </div>
                </div>
                <div id="buttons">
                    <button type="submit" class="button disabled" id="submit-button" disabled>Enviar</button>
                    <button type="reset" class="button" id="reset-button">Limpar Dados</button>
                </div>
            </form>
        </section>
    </main>
    <script>
        const submitButton = document.getElementById('submit-button');
        submitButton.addEventListener('click', function(event) {
            event.preventDefault();
        });

        const imageAgreement = document.getElementById('agreement2');

        function changeSubmitButtonStatus () {
            if (imageAgreement.checked === true) {
            submitButton.disabled = false;
            submitButton.classList.remove('disabled');
           } else {
            submitButton.disabled = true;
            submitButton.classList.add('disabled');
           }
        }

        imageAgreement.addEventListener('click', changeSubmitButtonStatus);

        const resetButton = document.getElementById('reset-button');
        resetButton.addEventListener('mouseleave', changeSubmitButtonStatus);

        function checkLength (min, max, input) {
            let length = input.value.length;
            let lengthOk;
            if (length >= min && length <= max) {
                lengthOk = true;
            } else {
                lengthOk = false;
            }
            return lengthOk;
        }
        
        submitButton.addEventListener('click', function() {
            const inputName = document.getElementById('name');
            const inputEmail = document.getElementById('email');
            const inputText = document.getElementById('question');
            const dateContent = document.getElementById('date').value;

            let nameLengthOk = checkLength(10, 40, inputName);
            let emailLengthOk = checkLength(10, 50, inputEmail);
            let textLengthOk = checkLength(10, 500, inputText);

            if (nameLengthOk && emailLengthOk && textLengthOk && dateContent !== '') {
                alert('Dados enviados com sucesso! Obrigado por participar do concurso TrybeTrip.');
            } else {
                alert('Dados inválidos.');
            }
        });
    </script>
</body>
</html>
